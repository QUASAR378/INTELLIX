# ğŸ“Š INTELLIX System Diagram & Data Flow Visualization

## Component Hierarchy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        App.jsx (Root)                       â”‚
â”‚  - Backend connection check                                 â”‚
â”‚  - selectedCounty state                                     â”‚
â”‚  - Route management                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚            â”‚            â”‚              â”‚              â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
   â”‚Dashboardâ”‚  â”‚Analyticsâ”‚  â”‚ Alerts â”‚  â”‚Recommend  â”‚  â”‚ Contact â”‚
   â”‚  Page   â”‚  â”‚  Page   â”‚  â”‚  Page  â”‚  â”‚  Page     â”‚  â”‚  Page   â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚            â”‚            â”‚             â”‚             â”‚
        â”‚            â”‚            â”‚      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”      â”‚
        â”‚            â”‚            â”‚      â”‚Recommendation
        â”‚            â”‚            â”‚      â”‚Form Component
        â”‚            â”‚            â”‚      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
        â”‚            â”‚            â”‚             â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚         Core Components (Shared/Reusable)             â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                                                        â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
   â”‚  â”‚  KenyaMap   â”‚  â”‚CountyDetails â”‚  â”‚MiniGridSim â”‚  â”‚
   â”‚  â”‚ Component   â”‚  â”‚ Component    â”‚  â”‚ Component  â”‚  â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
   â”‚         â”‚                â”‚               â”‚           â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”        â”‚
   â”‚  â”‚        AIAnalysis Component              â”‚        â”‚
   â”‚  â”‚   (Shows AI Recommendations)             â”‚        â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
   â”‚                                                        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## API Call Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Frontend (React)                            â”‚
â”‚               http://localhost:5173                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ axios API calls
                         â”‚ (with fallback data)
                         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                â”‚                 â”‚              â”‚
    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
    â”‚Countiesâ”‚      â”‚Dashboardâ”‚      â”‚MiniGrids â”‚   â”‚Recomm   â”‚
    â”‚ API    â”‚      â”‚  API     â”‚      â”‚  API     â”‚   â”‚ endationâ”‚
    â”‚        â”‚      â”‚          â”‚      â”‚          â”‚   â”‚ API     â”‚
    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚                â”‚                  â”‚            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚                  â”‚
                    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
                    â”‚  Backend (FastAPI)         â”‚
                    â”‚  http://localhost:8002     â”‚
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                         â”‚                  â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                     â”‚                    â”‚
        â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
        â”‚Data Serviceâ”‚      â”‚AI Agent     â”‚    â”‚Simulation   â”‚
        â”‚            â”‚      â”‚Service      â”‚    â”‚Engine       â”‚
        â”‚Load JSON   â”‚      â”‚             â”‚    â”‚             â”‚
        â”‚Real Data   â”‚      â”‚Claude/      â”‚    â”‚24h forecast â”‚
        â”‚            â”‚      â”‚Gemini/Rule  â”‚    â”‚             â”‚
        â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
            â”‚                    â”‚                    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚                â”‚
                    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                    â”‚ Energy-data-pipeline/data â”‚
                    â”‚                           â”‚
                    â”‚ - kenya_energy_          â”‚
                    â”‚   comprehensive.json     â”‚
                    â”‚ - weather_solar.csv      â”‚
                    â”‚ - kplc_outages.csv       â”‚
                    â”‚ - county_demographics.csvâ”‚
                    â”‚ - kengen_generation.csv  â”‚
                    â”‚                           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Page Navigation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          User Enters Application                 â”‚
â”‚        http://localhost:5173                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
              â”‚   App.jsx   â”‚
              â”‚   Loads     â”‚
              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Check Backend Status â”‚
         â”‚  GET /health          â”‚
         â”‚  (retry on failure)   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                        â”‚
    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚ Connectedâ”‚          â”‚ NOT Found  â”‚
    â”‚ âœ…       â”‚          â”‚ âŒ         â”‚
    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
        â”‚                       â”‚
    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚ Load Dashboard Page  â”‚    â”‚
    â”‚ (Default Route: /)   â”‚    â”‚
    â”‚                      â”‚    â”‚
    â”‚ GET /api/            â”‚    â”‚
    â”‚   dashboard/overview â”‚    â”‚
    â”‚ GET /api/dashboard/  â”‚    â”‚
    â”‚   stats              â”‚    â”‚
    â”‚ GET /api/counties/   â”‚    â”‚
    â”‚   map/data           â”‚    â”‚
    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
        â”‚                       â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚ Render KenyaMap       â”‚   â”‚
   â”‚ Interactive Map with: â”‚   â”‚
   â”‚ - 47 County Markers   â”‚   â”‚
   â”‚ - Color by Priority   â”‚   â”‚
   â”‚ - Clickable Markers   â”‚   â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
        â”‚                      â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
   â”‚User Clicks County       â”‚ â”‚
   â”‚Example: Turkana         â”‚ â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”‚                      â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
   â”‚ Dashboard Component       â”‚â”‚
   â”‚ Triggers Flow:            â”‚â”‚
   â”‚ 1. Fetch County Data      â”‚â”‚
   â”‚ 2. Run Simulation         â”‚â”‚
   â”‚ 3. Get AI Analysis        â”‚â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
        â”‚                       â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Parallel Requests:          â”‚
   â”‚                             â”‚
   â”‚ â”œâ”€ GET /api/counties/{id}  â”‚
   â”‚ â”‚  Returns: Real county    â”‚
   â”‚ â”‚  data with all fields    â”‚
   â”‚ â”‚                          â”‚
   â”‚ â”œâ”€ POST /api/minigrids/   â”‚
   â”‚ â”‚  simulate               â”‚
   â”‚ â”‚  Returns: 24h forecast  â”‚
   â”‚ â”‚                          â”‚
   â”‚ â””â”€ POST /api/recomm       â”‚
   â”‚    endations/ai-analysis  â”‚
   â”‚    Returns: AI            â”‚
   â”‚    recommendation         â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚Display Results in 3 Tabs: â”‚
   â”‚                           â”‚
   â”‚1. County Details          â”‚
   â”‚   - Overview              â”‚
   â”‚   - Energy metrics        â”‚
   â”‚   - Hospitals/Schools     â”‚
   â”‚                           â”‚
   â”‚2. Mini-Grid Simulation    â”‚
   â”‚   - 24h forecast chart    â”‚
   â”‚   - Efficiency score      â”‚
   â”‚   - Cost savings          â”‚
   â”‚                           â”‚
   â”‚3. AI Recommendations      â”‚
   â”‚   - Priority level        â”‚
   â”‚   - Solution type         â”‚
   â”‚   - Investment needed     â”‚
   â”‚   - ROI %                 â”‚
   â”‚   - Specific actions      â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Navigation Options:        â”‚
   â”‚                           â”‚
   â”‚ - Go to /analytics        â”‚
   â”‚   (Nationwide view)       â”‚
   â”‚                           â”‚
   â”‚ - Go to /alerts           â”‚
   â”‚   (Real-time monitoring) â”‚
   â”‚                           â”‚
   â”‚ - Go to /recommendations  â”‚
   â”‚   (Standalone form)       â”‚
   â”‚                           â”‚
   â”‚ - Click Different County  â”‚
   â”‚   (Repeats Flow)          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data State Persistence

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         App Opens / Reloads             â”‚
â”‚        Check sessionStorage             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Found County   â”‚
         â”‚ Selection?     â”‚
         â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
             â”‚        â”‚
        YES  â”‚        â”‚ NO
        â”Œâ”€â”€â”€â”€â–¼â”    â”Œâ”€â”€â–¼â”€â”€â”€â”€â”
        â”‚Load â”‚    â”‚Load   â”‚
        â”‚from â”‚    â”‚Blank  â”‚
        â”‚Storeâ”‚    â”‚State  â”‚
        â””â”€â”€â”€â”€â”¬â”˜    â””â”€â”€â”¬â”€â”€â”€â”€â”˜
             â”‚        â”‚
             â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
                  â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ sessionStorage   â”‚
         â”‚                  â”‚
         â”‚ selectedCounty:  â”‚
         â”‚ {                â”‚
         â”‚   id: "turkana" â”‚
         â”‚   name: "..."   â”‚
         â”‚   coords: [...]â”‚
         â”‚ }               â”‚
         â”‚                  â”‚
         â”‚ Persists Until: â”‚
         â”‚ - Page close    â”‚
         â”‚ - Tab close     â”‚
         â”‚ - Manual clear  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         
This means:
- Switch between pages â†’ County stays selected
- Refresh page â†’ County still selected
- Open new tab â†’ New session (fresh start)
- Close tab â†’ Data gone
```

---

## Error Handling & Fallbacks

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      API Call Attempted            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
         â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Request    â”‚
         â”‚ Succeeds?  â”‚
         â””â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
             â”‚    â”‚
            YES  NO
        â”Œâ”€â”€â”€â”€â–¼â”  â”‚
        â”‚Use  â”‚  â”‚
        â”‚Real â”‚  â”‚
        â”‚Data â”‚  â”‚
        â””â”€â”€â”€â”€â”€â”˜  â”‚
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Show Error in    â”‚
        â”‚ Console          â”‚
        â”‚ Log Details      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Check Component  â”‚
        â”‚ for Fallback     â”‚
        â”‚ Data             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Found Fallback?   â”‚
        â”‚                   â”‚
        â”‚ Examples:         â”‚
        â”‚ - Static array    â”‚
        â”‚ - Mock data       â”‚
        â”‚ - Empty state     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
            â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Use Fallback   â”‚
            â”‚ Render anyway  â”‚
            â”‚ User sees data â”‚
            â”‚ (no crash)     â”‚
            â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
            â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ User Experience:
            â”‚                â”‚
            â”‚ âœ… App Still   â”‚
            â”‚    Works       â”‚
            â”‚ âœ… No Blank    â”‚
            â”‚    Pages       â”‚
            â”‚ âœ… No Errors   â”‚
            â”‚ âŒ May be      â”‚
            â”‚    Partial     â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Simulation & AI Pipeline

```
User Selects County (Turkana)
â”‚
â”œâ”€ Dashboard.handleCountySelect()
â”‚  â”‚
â”‚  â”œâ”€ GET /api/counties/turkana
â”‚  â”‚  Returns: Real county data
â”‚  â”‚
â”‚  â”œâ”€ Prepare simulation config:
â”‚  â”‚  {
â”‚  â”‚    solar_capacity_kw: 100,
â”‚  â”‚    battery_capacity_kwh: 400,
â”‚  â”‚    households_served: 9000,
â”‚  â”‚    location: "Turkana"
â”‚  â”‚  }
â”‚  â”‚
â”‚  â””â”€ Prepare AI analysis request:
â”‚     {
â”‚       county_name: "Turkana",
â”‚       population: 926976,
â”‚       blackout_frequency: 60,
â”‚       solar_irradiance: 6.8,
â”‚       grid_distance: 45,
â”‚       hospitals: 15,
â”‚       schools: 210,
â”‚       current_kwh: 25000000
â”‚     }
â”‚
â”œâ”€ PARALLEL:
â”‚
â”‚ Branch 1: Simulation
â”‚ â”œâ”€ POST /api/minigrids/simulate
â”‚ â”œâ”€ Backend calculates:
â”‚ â”‚  â”œâ”€ Hour 0-5: No solar, demand = 50kW
â”‚ â”‚  â”œâ”€ Hour 6-18: Solar curves up, peaks at 14:00
â”‚ â”‚  â”œâ”€ Hour 18-24: Solar off, battery discharges
â”‚ â”‚  â””â”€ Battery SOC: Never drops below 20%
â”‚ â”œâ”€ Returns:
â”‚ â”‚  {
â”‚ â”‚    hourly_data: [
â”‚ â”‚      {hour: 0, generation_kw: 0, demand_kw: 50, battery_soc: 80},
â”‚ â”‚      {hour: 1, generation_kw: 0, demand_kw: 50, battery_soc: 75},
â”‚ â”‚      ...
â”‚ â”‚      {hour: 14, generation_kw: 95, demand_kw: 60, battery_soc: 95},
â”‚ â”‚      ...
â”‚ â”‚    ],
â”‚ â”‚    efficiency_score: 87.5,
â”‚ â”‚    cost_savings_usd: 15000
â”‚ â”‚  }
â”‚ â”‚
â”‚ â””â”€ Frontend renders MiniGridSim
â”‚    â”œâ”€ Line chart: generation vs demand
â”‚    â”œâ”€ Area chart: battery SOC
â”‚    â””â”€ Metrics: efficiency, ROI
â”‚
â”‚ Branch 2: AI Analysis
â”‚ â”œâ”€ POST /api/recommendations/ai-analysis
â”‚ â”œâ”€ Backend flow:
â”‚ â”‚  â”œâ”€ Try Claude API (if key exists)
â”‚ â”‚  â”‚  â”œâ”€ Create prompt with county data
â”‚ â”‚  â”‚  â”œâ”€ Send to Claude
â”‚ â”‚  â”‚  â””â”€ Parse JSON response
â”‚ â”‚  â”‚
â”‚ â”‚  â”œâ”€ Else Try Gemini API
â”‚ â”‚  â”‚  â”œâ”€ Create prompt with county data
â”‚ â”‚  â”‚  â”œâ”€ Send to Gemini
â”‚ â”‚  â”‚  â””â”€ Parse JSON response
â”‚ â”‚  â”‚
â”‚ â”‚  â””â”€ Else Use Rule-Based Fallback
â”‚ â”‚     â”œâ”€ Calculate priority_score
â”‚ â”‚     â”œâ”€ Determine solution_type
â”‚ â”‚     â”œâ”€ Estimate investment
â”‚ â”‚     â””â”€ Generate recommendations
â”‚ â”‚
â”‚ â”œâ”€ Returns:
â”‚ â”‚  {
â”‚ â”‚    priority_level: "high",
â”‚ â”‚    solution_type: "solar_minigrid",
â”‚ â”‚    investment_needed: 2500000,
â”‚ â”‚    timeline: "12-18 months",
â”‚ â”‚    roi_percentage: 15.2,
â”‚ â”‚    recommendations: [
â”‚ â”‚      "Install 250kW solar array",
â”‚ â”‚      "Add 1MWh battery storage",
â”‚ â”‚      "Train local technicians",
â”‚ â”‚      "Establish community ownership"
â”‚ â”‚    ],
â”‚ â”‚    reasoning: "..."
â”‚ â”‚  }
â”‚ â”‚
â”‚ â””â”€ Frontend renders AIAnalysis
â”‚    â”œâ”€ Priority badge
â”‚    â”œâ”€ Solution recommendation
â”‚    â”œâ”€ Investment amount
â”‚    â”œâ”€ Timeline
â”‚    â”œâ”€ ROI percentage
â”‚    â””â”€ Detailed recommendations
â”‚
â””â”€ Combined Results
   â”‚
   â”œâ”€ Tab 1: County Details
   â”œâ”€ Tab 2: Simulation (MiniGridSim)
   â”œâ”€ Tab 3: AI Analysis (AIAnalysis)
   â”‚
   â””â”€ User sees complete picture:
      âœ… What the county needs
      âœ… How simulation would look
      âœ… How much AI recommends investing
      âœ… Expected timeline & ROI
      âœ… Specific action items
```

---

## Summary: Everything Connected âœ…

```
Frontend (React)
    â†• API Calls with Fallbacks
Backend (FastAPI)
    â†• Data Processing
Real Data (JSON Files)
    
Result: Complete System

Every page can reach any data.
Every component can use any API.
Every API has fallback data.
User always sees something (no blank pages).
```

**Status**: âœ… All flows working  
**Data**: âœ… Real + Fallback  
**Performance**: âœ… Optimized with parallel requests  
**Reliability**: âœ… Error handling on all paths
